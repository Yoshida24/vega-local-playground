<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vega-Lite Editor Example</title>

    <!-- Vega and Vega-Lite JavaScript Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

    <style>
        #editor,
        #vis {
            float: left;
            width: 45%;
        }

        #vis {
            margin-left: 10px;
        }

        textarea {
            width: 100%;
            height: 400px;
        }
    </style>
</head>

<body>
    <h3>Vega-Lite JSON Editor:</h3>
    <div id="editor">
        <textarea id="vega-textarea">
{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "A simple bar chart with embedded data.",
  "data": {
    "values": [
      {"a": "A", "b": 28},
      {"a": "B", "b": 55},
      {"a": "C", "b": 43},
      {"a": "D", "b": 91},
      {"a": "E", "b": 81},
      {"a": "F", "b": 53},
      {"a": "G", "b": 19},
      {"a": "H", "b": 87},
      {"a": "I", "b": 52}
    ]
  },
  "mark": "bar",
  "encoding": {
    "x": {"field": "a", "type": "ordinal"},
    "y": {"field": "b", "type": "quantitative"}
  }
}
    </textarea>
    </div>
    <div class=".spacer">
        <div>
            <div id="vis"></div>

            <script>
                function renderVega() {
                    try {
                        const spec = JSON.parse(document.getElementById("vega-textarea").value);
                        vegaEmbed("#vis", spec, { actions: false });
                    } catch (e) {
                        console.error("Error parsing JSON:", e);
                    }
                }

                setInterval(renderVega, 500);
            </script>

</body>

</html>
